name: Bootstrap Autopilot
on:
  workflow_dispatch:

permissions:
  contents: write

jobs:
  genesis:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Create GENESIS block
        run: |
          mkdir -p .autopilot
          {
            echo "genesis_at=$(date -u +%FT%TZ)"
            echo "workspace=render"
            echo "service_url=https://pilota-automatico-ai.onrender.com"
          } > .autopilot/GENESIS.env
          echo "GENESIS block created:"
          cat .autopilot/GENESIS.env

      - name: Commit GENESIS
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "Add GENESIS block"
          file_pattern: .autopilot/GENESIS.env
